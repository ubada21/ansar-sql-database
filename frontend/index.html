<!DOCTYPE html>
<html>
<head>
  <title>Full Stack App</title>
</head>
<body>
  <h1></h1>
  <ul id="userList"></ul>

<script>
  fetch('/api/users', { credentials: 'include' })
    .then(response => {
      if (!response.ok) {
        if (response.status === 401) {
          alert('Session expired. Please log in again.');
          window.location.href = '/views/login.html'; 
          return;
        }
        throw new Error('Failed to fetch users');
      }
      return response.json();
    })
    .then(data => {
      if (!data) return; // stop if redirected

      const list = document.getElementById('userList');
      data.users.forEach(user => {
        const item = document.createElement('li');
        item.textContent = user.FirstName;
        list.appendChild(item);
      });
    })
    .catch(err => {
      console.error(err);
      alert('Something went wrong. Please try again.');
    });
</script>
</body>
</html>

