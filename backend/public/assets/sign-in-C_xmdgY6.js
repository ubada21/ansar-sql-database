import{s as M,r as d,h as A,j as s,i as E,k as U,n as k,o as j,q as D,t as N,v as G,w as O,x as $,y as J,z as v,d as z,E as q,G as H,u as W,f as S,I as b,J as w,T as Y,e as P,A as B}from"./index-BrH6QSBs.js";import{u as _,F as K,R as C}from"./jwt-sign-up-view-Y0qv-Gss.js";const Q=J(),X=M("div",{name:"MuiStack",slot:"Root"});function Z(e){return U({props:e,name:"MuiStack",defaultTheme:Q})}function ee(e,t){const o=d.Children.toArray(e).filter(Boolean);return o.reduce((i,c,n)=>(i.push(c),n<o.length-1&&i.push(d.cloneElement(t,{key:`separator-${n}`})),i),[])}const se=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],te=({ownerState:e,theme:t})=>{let o={display:"flex",flexDirection:"column",...k({theme:t},j({values:e.direction,breakpoints:t.breakpoints.values}),i=>({flexDirection:i}))};if(e.spacing){const i=D(t),c=Object.keys(t.breakpoints.values).reduce((a,r)=>((typeof e.spacing=="object"&&e.spacing[r]!=null||typeof e.direction=="object"&&e.direction[r]!=null)&&(a[r]=!0),a),{}),n=j({values:e.direction,base:c}),g=j({values:e.spacing,base:c});typeof n=="object"&&Object.keys(n).forEach((a,r,p)=>{if(!n[a]){const m=r>0?n[p[r-1]]:"column";n[a]=m}}),o=N(o,k({theme:t},g,(a,r)=>e.useFlexGap?{gap:v(i,a)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${se(r?n[r]:e.direction)}`]:v(i,a)}}))}return o=G(t.breakpoints,o),o};function oe(e={}){const{createStyledComponent:t=X,useThemeProps:o=Z,componentName:i="MuiStack"}=e,c=()=>O({root:["root"]},a=>$(i,a),{}),n=t(te);return d.forwardRef(function(a,r){const p=o(a),y=A(p),{component:m="div",direction:l="column",spacing:x=0,divider:f,children:u,className:T,useFlexGap:L=!1,...R}=y,V={direction:l,spacing:x,useFlexGap:L},I=c();return s.jsx(n,{as:m,ownerState:V,ref:r,className:E(I.root,T),...R,children:f?ee(u,f):u})})}let F=!1;const ne=()=>{F||(console.warn(["MUI: The LoadingButton component functionality is now part of the Button component from Material UI.","","You should use `import Button from '@mui/material/Button'`","or `import { Button } from '@mui/material'`"].join(`
`)),F=!0)},ae=d.forwardRef(function(t,o){return ne(),s.jsx(z,{ref:o,...t})}),re=oe({createStyledComponent:q("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>H({props:e,name:"MuiStack"})});function ie(){const e=W(),[t,o]=d.useState(""),[i,c]=d.useState(!1),n=_({defaultValues:{email:"",password:""}}),{handleSubmit:g,reset:h}=n,{authenticated:a,user:r}=S();console.log("Current auth state:",{authenticated:a,user:r});const p=d.useCallback(async()=>{try{const l=await b.get(w.auth.check_auth);console.log("Auth check response:",l.data),l.status===200&&e.push("/profile")}catch(l){console.error("Auth check failed",l)}},[e]);d.useEffect(()=>{p()},[p]);const{checkUserSession:y}=S(),m=g(async l=>{var x,f;o(""),c(!0);try{const u=await b.post(w.auth.signIn,{email:l.email,password:l.password});console.log("Login successful:",u.data.message),h(),u.status===200&&(console.log("Login successful, updating auth context..."),await y(),e.push("/profile"))}catch(u){console.error("Login error:",u),o(((f=(x=u.response)==null?void 0:x.data)==null?void 0:f.message)||"Login failed")}finally{c(!1)}});return s.jsxs(s.Fragment,{children:[s.jsxs(Y,{variant:"h4",gutterBottom:!0,children:["Sign in to ",P.appName]}),s.jsx(B,{severity:"info",sx:{mb:3},children:"Use your registered email and password to sign in."}),t&&s.jsx(B,{severity:"error",sx:{mb:3},children:t}),s.jsxs(K,{methods:n,onSubmit:m,children:[s.jsxs(re,{spacing:3,children:[s.jsx(C,{name:"email",label:"Email address"}),s.jsx(C,{name:"password",label:"Password",type:"password"})]}),s.jsx(ae,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:i,sx:{mt:3},children:"Sign in"})]})]})}const ce={title:`Sign in | Jwt - ${P.appName}`};function de(){return s.jsxs(s.Fragment,{children:[s.jsx("title",{children:ce.title}),s.jsx(ie,{})]})}export{de as default};
