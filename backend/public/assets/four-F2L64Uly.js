import{r as a,G as I,O as A,j as e,K as ne,B as L,T as i,N as F,I as O,Z as Q,k as N,D as Ee,d as M,b as ye,a7 as le,a8 as W,Q as ve,V as $,W as ae,X as K,Y as P,A as Te,ae as Re,ab as _,z as we,E as Ie,p as z,e as re,w as se,R as Ae,x as Oe,y as ke,ad as Le}from"./index-B-O2wvL4.js";import{C as Ue}from"./custom-breadcrumbs-C2AuKEDp.js";import{C as Ne}from"./course-quick-edit-form-BYnxThuT.js";import{t as T}from"./index-bP69XAuA.js";import{u as Pe,T as Fe,b as ze,c as Me,e as We,d as Be,f as Ve,a as _e,g as He}from"./table-pagination-custom-DAfTvxoS.js";import{F as Ge,a as H,c as G}from"./filters-result-CAwOcmvx.js";import{D as oe,a as ie}from"./DialogTitle-w8z7uk1s.js";import{S as ce}from"./Stack-BjYbPdpy.js";import{G as v}from"./Grid-Ba55pw_4.js";import{D as de}from"./DialogActions-DZ5SCz5y.js";import{T as Y,a as g,b as he,d as Qe,c as xe}from"./TableHead-CcFJ9gr-.js";import{T as $e}from"./TextField-BfDbW8wr.js";import{T as Ke}from"./TableContainer-BkKYrVIR.js";import"./zod-DxVdrIxN.js";import"./form-provider-BL3TSD8n.js";import"./TableSortLabel-CGO5UpHm.js";function Ye({open:o,onClose:h,courseId:s}){const[c,p]=a.useState(null),[f,D]=a.useState([]),[l,r]=a.useState([]),[j,b]=a.useState([]),[C,R]=a.useState(!1),y=a.useCallback(async()=>{R(!0);try{const d=await I.get(A.courses.details(s));p(d.data.course);try{const u=await I.get(A.courses.instructors(s));D(u.data.instructors||[])}catch(u){console.error("Error fetching instructors:",u),D([])}try{const u=await I.get(A.courses.students(s));r(u.data.students||[])}catch(u){console.error("Error fetching students:",u),r([])}try{const u=await I.get(A.courses.schedule(s));b(u.data.schedule||[])}catch(u){console.error("Error fetching schedule:",u),b([])}}catch(d){console.error("Error fetching course details:",d)}finally{R(!1)}},[s]);a.useEffect(()=>{o&&s&&y()},[o,s,y]);const k=()=>{p(null),D([]),r([]),b([]),h()},S=c?((d,u)=>{const t=new Date,x=new Date(d),w=new Date(u);return x>t?{label:"Upcoming",color:"info"}:x<=t&&w>=t?{label:"Ongoing",color:"success"}:{label:"Completed",color:"default"}})(c.STARTDATE,c.ENDDATE):null;return e.jsxs(ne,{fullWidth:!0,maxWidth:"md",open:o,onClose:k,PaperProps:{sx:{borderRadius:2}},children:[e.jsx(oe,{sx:{pb:2},children:e.jsxs(L,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(i,{variant:"h6",children:"Course Details"}),e.jsx(F,{onClick:k,children:e.jsx(O,{icon:"eva:close-fill"})})]})}),e.jsx(ie,{sx:{pb:2},children:C?e.jsx(L,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Q,{})}):c?e.jsxs(ce,{spacing:3,children:[e.jsxs(N,{sx:{p:3},children:[e.jsx(i,{variant:"h5",sx:{mb:2,color:"primary.main"},children:c.TITLE}),e.jsxs(v,{container:!0,spacing:2,children:[e.jsxs(v,{size:{xs:12,sm:6},children:[e.jsx(i,{variant:"body2",sx:{color:"text.secondary",mb:.5},children:"Course ID"}),e.jsx(i,{variant:"body1",sx:{mb:2},children:c.COURSEID})]}),e.jsxs(v,{size:{xs:12,sm:6},children:[e.jsx(i,{variant:"body2",sx:{color:"text.secondary",mb:.5},children:"Status"}),e.jsx(i,{variant:"body1",sx:{mb:2,color:(S==null?void 0:S.color)==="success"?"success.main":(S==null?void 0:S.color)==="info"?"info.main":"text.secondary"},children:S==null?void 0:S.label})]}),e.jsxs(v,{size:{xs:12,sm:6},children:[e.jsx(i,{variant:"body2",sx:{color:"text.secondary",mb:.5},children:"Location"}),e.jsx(i,{variant:"body1",sx:{mb:2},children:c.LOCATION})]}),e.jsxs(v,{size:{xs:12,sm:6},children:[e.jsx(i,{variant:"body2",sx:{color:"text.secondary",mb:.5},children:"Capacity"}),e.jsx(i,{variant:"body1",sx:{mb:2},children:c.CAPACITY||"Not specified"})]}),e.jsxs(v,{size:{xs:12,sm:6},children:[e.jsx(i,{variant:"body2",sx:{color:"text.secondary",mb:.5},children:"Start Date"}),e.jsx(i,{variant:"body1",sx:{mb:2},children:new Date(c.STARTDATE).toLocaleDateString()})]}),e.jsxs(v,{size:{xs:12,sm:6},children:[e.jsx(i,{variant:"body2",sx:{color:"text.secondary",mb:.5},children:"End Date"}),e.jsx(i,{variant:"body1",sx:{mb:2},children:new Date(c.ENDDATE).toLocaleDateString()})]}),c.DESCRIPTION&&e.jsxs(v,{size:{xs:12},children:[e.jsx(i,{variant:"body2",sx:{color:"text.secondary",mb:.5},children:"Description"}),e.jsx(i,{variant:"body1",children:c.DESCRIPTION})]}),e.jsxs(v,{size:{xs:12},children:[e.jsx(i,{variant:"body2",sx:{color:"text.secondary",mb:.5},children:"Instructors"}),f.length>0?e.jsx(L,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:f.map(d=>e.jsxs(i,{variant:"body1",sx:{color:"primary.main",fontWeight:500,"&:not(:last-child)":{"&::after":{content:'","',color:"text.secondary"}}},children:[d.FIRSTNAME," ",d.LASTNAME]},d.UID))}):e.jsx(i,{variant:"body1",sx:{color:"text.secondary",fontStyle:"italic"},children:"No instructors assigned"})]})]})]}),e.jsxs(N,{sx:{p:3},children:[e.jsxs(i,{variant:"h6",sx:{mb:2},children:["Schedule (",j.length," sessions)"]}),j.length>0?e.jsx(v,{container:!0,spacing:2,children:j.map(d=>e.jsx(v,{size:{xs:12,sm:6,md:4},children:e.jsxs(N,{sx:{p:2,bgcolor:"background.neutral"},children:[e.jsx(i,{variant:"subtitle2",sx:{color:"primary.main",mb:1},children:d.WEEKDAY}),e.jsxs(i,{variant:"body2",sx:{color:"text.secondary"},children:[d.START_TIME," - ",d.END_TIME]})]})},d.SCHEDULEID))}):e.jsx(i,{variant:"body2",sx:{color:"text.secondary",fontStyle:"italic"},children:"No schedule set for this course."})]}),e.jsx(Ee,{}),e.jsxs(N,{sx:{p:3},children:[e.jsxs(i,{variant:"h6",sx:{mb:2},children:["Enrolled Students (",l.length,")"]}),l.length>0?e.jsx(v,{container:!0,spacing:2,children:l.map(d=>e.jsx(v,{size:{xs:12,sm:6,md:4},children:e.jsxs(N,{sx:{p:2,bgcolor:"background.neutral"},children:[e.jsxs(i,{variant:"subtitle2",children:[d.FIRSTNAME," ",d.LASTNAME]}),e.jsxs(i,{variant:"caption",sx:{color:"text.secondary"},children:["ID: ",d.UID]}),d.ENROLLMENT_DATE&&e.jsxs(i,{variant:"caption",sx:{color:"text.secondary",display:"block"},children:["Enrolled: ",new Date(d.ENROLLMENT_DATE).toLocaleDateString()]})]})},d.UID))}):e.jsx(i,{variant:"body2",sx:{color:"text.secondary",fontStyle:"italic"},children:"No students enrolled in this course."})]})]}):e.jsx(i,{variant:"body2",sx:{color:"text.secondary",textAlign:"center",py:4},children:"Course not found."})}),e.jsx(de,{sx:{px:3,pb:3},children:e.jsx(M,{variant:"outlined",color:"inherit",onClick:k,children:"Close"})})]})}function qe({row:o,selected:h,onSelectRow:s,onDeleteRow:c,onEditRow:p,onViewRow:f,onQuickEdit:D,editHref:l,onViewDetails:r,onManageEnrollment:j}){const[b,C]=a.useState(!1),{COURSEID:R,TITLE:y,LOCATION:k,STARTDATE:U,ENDDATE:S}=o,d=a.useCallback(()=>{c()},[c]),t=(()=>{const x=new Date,w=new Date(U),B=new Date(S);return w>x?{label:"Upcoming",color:"info"}:w<=x&&B>=x?{label:"Ongoing",color:"success"}:{label:"Completed",color:"default"}})();return e.jsxs(e.Fragment,{children:[e.jsxs(Y,{hover:!0,selected:h,children:[e.jsx(g,{padding:"checkbox",children:e.jsx(F,{color:h?"primary":"default",onClick:()=>s(R),children:e.jsx(O,{icon:h?"eva:checkmark-circle-2-fill":"eva:radio-button-off-fill"})})}),e.jsx(g,{children:e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"14px"},children:e.jsx(ye,{component:"button",variant:"body1",onClick:()=>r(R),sx:{color:"primary.main",textDecoration:"none","&:hover":{textDecoration:"underline"},cursor:"pointer",border:"none",background:"none",padding:0,font:"inherit"},children:y})}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["ID: ",R]})]})})}),e.jsx(g,{children:e.jsx("div",{style:{fontSize:"14px"},children:k})}),e.jsx(g,{children:e.jsx("div",{style:{fontSize:"14px"},children:new Date(U).toLocaleDateString()})}),e.jsx(g,{children:e.jsx("div",{style:{fontSize:"14px"},children:new Date(S).toLocaleDateString()})}),e.jsx(g,{children:e.jsx(le,{variant:"soft",color:t.color,children:t.label})}),e.jsx(g,{align:"right",children:e.jsxs(L,{sx:{display:"flex",gap:1},children:[e.jsx(W,{title:"Manage Enrollments",placement:"top",arrow:!0,children:e.jsx(F,{color:"primary",onClick:()=>j(o),children:e.jsx(O,{icon:"mdi:account-group"})})}),e.jsx(W,{title:"Quick edit",placement:"top",arrow:!0,children:e.jsx(F,{color:b?"inherit":"default",onClick:()=>C(!0),children:e.jsx(O,{icon:"solar:pen-bold"})})}),e.jsx(W,{title:"Delete course",children:e.jsx(F,{color:"error",onClick:d,children:e.jsx(O,{icon:"solar:trash-bin-trash-bold"})})})]})})]}),e.jsx(Ne,{currentCourse:o,open:b,onClose:()=>C(!1)})]})}function Xe({filters:o,onFilters:h,locationOptions:s,onResetFilters:c,onDeleteRows:p,selected:f}){const D=l=>{const r=typeof l.target.value=="string"?l.target.value.split(","):l.target.value;if(r.length===1&&r.includes("all")){h("location",["all"]);return}if(r.includes("all")&&r.length>1){const j=r.filter(b=>b!=="all");h("location",j);return}if(r.length===0){h("location",["all"]);return}h("location",r)};return e.jsx(N,{sx:{p:2.5},children:e.jsxs(ce,{spacing:2.5,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-start",md:"center"},children:[e.jsx($e,{fullWidth:!0,value:o.name,onChange:l=>h("name",l.target.value),placeholder:"Search course...",InputProps:{startAdornment:e.jsx(ve,{position:"start",children:e.jsx(O,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsxs($,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(ae,{htmlFor:"filter-location-select",children:"Location"}),e.jsxs(K,{multiple:!0,label:"Location",value:o.location,onChange:D,renderValue:l=>l.map(r=>r).join(", "),inputProps:{id:"filter-location-select"},MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:[e.jsx(P,{value:"all",children:"All Locations"}),s.map(l=>e.jsx(P,{value:l,children:l},l))]})]}),e.jsxs(M,{color:"error",size:"small",onClick:p,startIcon:e.jsx(O,{icon:"solar:trash-bin-trash-bold"}),disabled:!f.length,children:["Delete (",f.length,")"]})]})})}function Ze({open:o,onClose:h,course:s}){const[c,p]=a.useState([]),[f,D]=a.useState([]),[l,r]=a.useState(!1),[j,b]=a.useState(!1),[C,R]=a.useState(""),y=a.useCallback(async()=>{if(s!=null&&s.COURSEID)try{r(!0);const t=await I.get(A.courses.students(s.COURSEID));p(t.data.students||[])}catch(t){console.error("Error fetching enrolled students:",t),T.error("Failed to fetch enrolled students")}finally{r(!1)}},[s==null?void 0:s.COURSEID]),k=a.useCallback(async()=>{try{const x=(await I.get(A.users.list)).data.users||[];D(x)}catch(t){console.error("Error fetching available students:",t),T.error("Failed to fetch available students")}},[]),U=a.useCallback(async()=>{var t,x;if(!(!C||!(s!=null&&s.COURSEID)))try{b(!0),await I.post(A.courses.enroll(s.COURSEID,C)),T.success("Student enrolled successfully!"),R(""),y()}catch(w){console.error("Error enrolling student:",w),(x=(t=w.response)==null?void 0:t.data)!=null&&x.message?T.error(w.response.data.message):T.error("Failed to enroll student")}finally{b(!1)}},[C,s==null?void 0:s.COURSEID,y]),S=a.useCallback(async t=>{if(s!=null&&s.COURSEID)try{await I.delete(A.courses.removeStudent(s.COURSEID,t)),T.success("Student removed from course successfully!"),y()}catch(x){console.error("Error removing student:",x),T.error("Failed to remove student from course")}},[s==null?void 0:s.COURSEID,y]),d=a.useCallback(async(t,x)=>{if(s!=null&&s.COURSEID)try{await I.patch(A.courses.updateEnrollment(s.COURSEID,t),{STATUS:x}),T.success("Enrollment status updated successfully!"),y()}catch(w){console.error("Error updating enrollment status:",w),T.error("Failed to update enrollment status")}},[s==null?void 0:s.COURSEID,y]);a.useEffect(()=>{o&&s&&(y(),k())},[o,s,y,k]);const u=t=>new Date(t).toLocaleDateString();return s?e.jsxs(ne,{open:o,onClose:h,maxWidth:"md",fullWidth:!0,children:[e.jsx(oe,{children:e.jsxs(L,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(O,{icon:"mdi:account-group"}),e.jsxs(i,{variant:"h6",children:["Manage Enrollments - ",s.TITLE]})]})}),e.jsxs(ie,{children:[e.jsxs(L,{mb:3,children:[e.jsxs(i,{variant:"body2",color:"text.secondary",mb:1,children:["Course ID: ",s.COURSEID," | Location: ",s.LOCATION]}),e.jsxs(i,{variant:"body2",color:"text.secondary",children:["Duration: ",u(s.STARTDATE)," - ",u(s.ENDDATE)]})]}),e.jsxs(L,{mb:3,children:[e.jsx(i,{variant:"h6",mb:2,children:"Enroll New Student"}),e.jsxs(L,{display:"flex",gap:2,alignItems:"center",children:[e.jsxs($,{sx:{minWidth:300},children:[e.jsx(ae,{children:"Select Student"}),e.jsx(K,{value:C,onChange:t=>R(t.target.value),label:"Select Student",disabled:j,children:f.filter(t=>!c.some(x=>x.UID===t.UID)).map(t=>e.jsxs(P,{value:t.UID,children:[t.FIRSTNAME," ",t.LASTNAME," (",t.EMAIL,")"]},t.UID))})]}),e.jsx(M,{variant:"contained",onClick:U,disabled:!C||j,startIcon:j?e.jsx(Q,{size:16}):e.jsx(O,{icon:"mdi:account-plus"}),children:j?"Enrolling...":"Enroll Student"})]})]}),e.jsxs(L,{children:[e.jsxs(i,{variant:"h6",mb:2,children:["Enrolled Students (",c.length,")"]}),l?e.jsx(L,{display:"flex",justifyContent:"center",p:3,children:e.jsx(Q,{})}):c.length===0?e.jsx(Te,{severity:"info",children:"No students are currently enrolled in this course."}):e.jsx(Ke,{component:Re,variant:"outlined",children:e.jsxs(he,{children:[e.jsx(Qe,{children:e.jsxs(Y,{children:[e.jsx(g,{children:"Student Name"}),e.jsx(g,{children:"Email"}),e.jsx(g,{children:"Enrollment Date"}),e.jsx(g,{children:"Status"}),e.jsx(g,{children:"Final Grade"}),e.jsx(g,{align:"right",children:"Actions"})]})}),e.jsx(xe,{children:c.map(t=>e.jsxs(Y,{children:[e.jsx(g,{children:e.jsxs(i,{variant:"body2",children:[t.FIRSTNAME," ",t.LASTNAME]})}),e.jsx(g,{children:e.jsx(i,{variant:"body2",color:"text.secondary",children:t.EMAIL||"N/A"})}),e.jsx(g,{children:e.jsx(i,{variant:"body2",children:u(t.ENROLL_DATE)})}),e.jsx(g,{children:e.jsx($,{size:"small",children:e.jsxs(K,{value:t.STATUS,onChange:x=>d(t.UID,x.target.value),sx:{minWidth:120},children:[e.jsx(P,{value:"active",children:"Active"}),e.jsx(P,{value:"completed",children:"Completed"}),e.jsx(P,{value:"withdrawn",children:"Withdrawn"}),e.jsx(P,{value:"failed",children:"Failed"})]})})}),e.jsx(g,{children:e.jsx(i,{variant:"body2",children:t.FINAL_GRADE||"N/A"})}),e.jsx(g,{align:"right",children:e.jsx(W,{title:"Remove from course",children:e.jsx(F,{color:"error",size:"small",onClick:()=>S(t.UID),children:e.jsx(O,{icon:"solar:trash-bin-trash-bold"})})})})]},t.UID))})]})})]})]}),e.jsx(de,{children:e.jsx(M,{onClick:h,children:"Close"})})]}):null}function Je({filters:o,onResetFilters:h,onRemoveLocation:s,results:c,sx:p}){const f=a.useCallback(()=>{h()},[h]),D=a.useCallback(r=>{s(r)},[s]),l=a.useCallback(()=>{h()},[h]);return e.jsxs(Ge,{totalResults:c,onReset:h,sx:p,children:[e.jsx(H,{label:"Status:",isShow:o.status!=="all",children:e.jsx(_,{...G,label:o.status,onDelete:l,sx:{textTransform:"capitalize"}})}),e.jsx(H,{label:"Location:",isShow:!!o.location.length&&!o.location.includes("all"),children:o.location.filter(r=>r!=="all").map(r=>a.createElement(_,{...G,key:r,label:r,onDelete:()=>D(r)}))}),e.jsx(H,{label:"Keyword:",isShow:!!o.name,children:e.jsx(_,{...G,label:o.name,onDelete:f})})]})}const te={title:`Courses | Dashboard - ${re.appName}`},es=[{value:"upcoming",label:"Upcoming"},{value:"ongoing",label:"Ongoing"},{value:"completed",label:"Completed"}],ss=[{value:"all",label:"All"},...es];function ts(){const o=we(),{authenticated:h}=Ie(),s=Pe(),[c,p]=a.useState([]),[f,D]=a.useState(!0),[l,r]=a.useState({name:"",location:["all"],status:"all"}),[j,b]=a.useState(!1),[C,R]=a.useState(!1),[y,k]=a.useState(null),[U,S]=a.useState(!1),[d,u]=a.useState(null),t=ns({inputData:c,comparator:He(s.order,s.orderBy),filters:l}),x=l.name!==""||l.location.length>0&&!l.location.includes("all")||l.status!=="all",w=!t.length&&x||!t.length,B=a.useCallback((n,m)=>{s.onResetPage(),r(E=>({...E,[n]:m}))},[s]),q=a.useCallback(()=>{s.onResetPage(),r({name:"",location:["all"],status:"all"})},[s]),ue=a.useCallback(n=>{s.onResetPage();const m=l.location.filter(E=>E!==n);m.length===0?r(E=>({...E,location:["all"]})):r(E=>({...E,location:m}))},[s,l.location]),me=a.useCallback((n,m)=>{s.onResetPage(),r(E=>({...E,status:m}))},[s]),X=a.useCallback(()=>{b(!0)},[]),V=a.useCallback(()=>{b(!1)},[]),je=a.useCallback(n=>{k(n),R(!0)},[]),ge=a.useCallback(()=>{k(null),R(!1)},[]),pe=a.useCallback(n=>{u(n),S(!0)},[]),fe=a.useCallback(()=>{u(null),S(!1)},[]),be=a.useCallback(async n=>{try{await I.delete(A.courses.details(n));const m=c.filter(E=>E.COURSEID!==n);p(m),s.onUpdatePageDeleteRow(t.length),T.success("Delete success!")}catch(m){console.error("Error deleting course:",m),T.error("Delete failed!")}},[c,t.length,s]),Ce=a.useCallback(async()=>{try{const n=c.filter(m=>!s.selected.includes(m.COURSEID));for(const m of s.selected)await I.delete(A.courses.details(m));p(n),s.onUpdatePageDeleteRows(t.length,t.length),V(),T.success("Delete success!")}catch(n){console.error("Error deleting courses:",n),T.error("Delete failed!")}},[c,t.length,s,V]),Se=a.useCallback(n=>{o.push(z.dashboard.courses+`/${n}/edit`)},[o]),De=a.useCallback(n=>{o.push(z.dashboard.courses+`/${n}`)},[o]),Z=a.useCallback(async()=>{try{D(!0);const n=await I.get(A.courses.list);p(n.data.courses||[])}catch(n){console.error("Error fetching courses:",n)}finally{D(!1)}},[]);return a.useEffect(()=>{h&&Z()},[h,Z]),h?f?e.jsxs(e.Fragment,{children:[e.jsx("title",{children:te.title}),e.jsx(se,{maxWidth:"xl",children:e.jsx("div",{children:"Loading courses..."})})]}):e.jsxs(e.Fragment,{children:[e.jsx("title",{children:te.title}),e.jsxs(se,{maxWidth:"xl",children:[e.jsx(Ue,{heading:"Courses List",links:[{name:"Dashboard",href:z.dashboard.root},{name:"Courses",href:z.dashboard.courses},{name:"List"}],action:e.jsx(M,{component:Ae,href:z.dashboard.course.new,variant:"contained",startIcon:e.jsx(O,{icon:"mingcute:add-line"}),children:"New Course"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(N,{children:[e.jsx(Oe,{value:l.status,onChange:me,sx:[n=>({px:{md:2.5},boxShadow:`inset 0 -2px 0 0 ${n.vars.palette.divider}`})],children:ss.map(n=>e.jsx(ke,{iconPosition:"end",value:n.value,label:n.label,icon:e.jsx(le,{variant:(n.value==="all"||n.value===l.status)&&"filled"||"soft",color:n.value==="upcoming"&&"primary"||n.value==="ongoing"&&"success"||n.value==="completed"&&"warning"||"default",children:n.value==="all"?c.length:c.filter(m=>{const E=new Date,J=new Date(m.STARTDATE),ee=new Date(m.ENDDATE);return n.value==="upcoming"?J>E:n.value==="ongoing"?J<=E&&ee>=E:n.value==="completed"?ee<E:!1}).length})},n.value))}),e.jsx(Xe,{filters:l,onFilters:B,locationOptions:[...new Set(c.map(n=>n.LOCATION))],onResetFilters:q,onDeleteRows:X,selected:s.selected}),x&&e.jsx(Je,{filters:l,onResetFilters:q,onRemoveLocation:ue,results:t.length,sx:{p:2.5,pt:0}}),e.jsxs(L,{sx:{position:"relative"},children:[e.jsx(Fe,{dense:s.dense,numSelected:s.selected.length,rowCount:t.length,onSelectAllRows:n=>s.onSelectAllRows(n,t.map(m=>m.COURSEID)),action:e.jsx(F,{color:"primary",onClick:X,children:e.jsx(O,{icon:"solar:trash-bin-trash-bold"})})}),e.jsx(Le,{children:e.jsxs(he,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(ze,{order:s.order,orderBy:s.orderBy,headCells:ls,rowCount:t.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:n=>s.onSelectAllRows(n,t.map(m=>m.COURSEID))}),e.jsxs(xe,{children:[t.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(n=>e.jsx(qe,{row:n,selected:s.selected.includes(n.COURSEID),onSelectRow:()=>s.onSelectRow(n.COURSEID),onDeleteRow:()=>be(n.COURSEID),onEditRow:()=>Se(n.COURSEID),onViewRow:()=>De(n.COURSEID),onViewDetails:je,onManageEnrollment:()=>pe(n),onQuickEdit:()=>{},editHref:z.dashboard.courses},n.COURSEID)),e.jsx(Me,{height:s.dense?56:76,emptyRows:We(s.page,s.rowsPerPage,t.length)}),e.jsx(Be,{notFound:w})]})]})})]}),e.jsx(Ve,{page:s.page,dense:s.dense,count:t.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onChangeDense:s.onChangeDense,onRowsPerPageChange:s.onChangeRowsPerPage})]})]}),e.jsx(_e,{open:j,onClose:V,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsx("strong",{children:s.selected.length})," items?"]}),action:e.jsx(M,{variant:"contained",color:"error",onClick:Ce,children:"Delete"})}),e.jsx(Ye,{open:C,onClose:ge,courseId:y}),e.jsx(Ze,{open:U,onClose:fe,course:d})]}):(o.push("/login"),null)}function ns({inputData:o,comparator:h,filters:s}){const{name:c,location:p,status:f}=s,D=o.map((l,r)=>[l,r]);if(D.sort((l,r)=>{const j=h(l[0],r[0]);return j!==0?j:l[1]-r[1]}),o=D.map(l=>l[0]),c&&(o=o.filter(l=>l.TITLE.toLowerCase().indexOf(c.toLowerCase())!==-1)),p.length&&!p.includes("all")&&(o=o.filter(l=>p.includes(l.LOCATION))),f!=="all"){const l=new Date;o=o.filter(r=>{const j=new Date(r.STARTDATE),b=new Date(r.ENDDATE);let C=!1;return f==="upcoming"?C=j>l:f==="ongoing"?C=j<=l&&b>=l:f==="completed"&&(C=b<l),C})}return o}const ls=[{id:"TITLE",label:"Course Title"},{id:"LOCATION",label:"Location"},{id:"STARTDATE",label:"Start Date"},{id:"ENDDATE",label:"End Date"},{id:"STATUS",label:"Status"},{id:"",width:88}],as={title:`Courses | Dashboard - ${re.appName}`};function Ds(){return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:as.title}),e.jsx(ts,{})]})}export{Ds as default};
