import{r as s,j as e,d as B,z as F,J as m,K as p,E as I,T as L,e as x,A as h}from"./index-FMbyiGBg.js";import"./jwt-sign-up-view-B1TnRQeJ.js";import{u as k,F as E,R as f}from"./form-provider-WaecDOme.js";import{S as A}from"./Stack-C1li3Gzt.js";import"./TextField-qof22fmD.js";let g=!1;const R=()=>{g||(console.warn(["MUI: The LoadingButton component functionality is now part of the Button component from Material UI.","","You should use `import Button from '@mui/material/Button'`","or `import { Button } from '@mui/material'`"].join(`
`)),g=!0)},v=s.forwardRef(function(r,o){return R(),e.jsx(B,{ref:o,...r})});function M(){const a=F(),[r,o]=s.useState(""),[w,i]=s.useState(!1),c=k({defaultValues:{email:"",password:""}}),{handleSubmit:j,reset:y}=c,u=s.useCallback(async()=>{try{(await m.get(p.auth.check_auth)).status===200&&a.push("/dashboard")}catch(t){console.error("Auth check failed",t)}},[a]);s.useEffect(()=>{u()},[u]);const{checkUserSession:S}=I(),b=j(async t=>{var l,d;o(""),i(!0);try{const n=await m.post(p.auth.signIn,{email:t.email,password:t.password});y(),n.status===200&&(await S(),a.push("/dashboard"))}catch(n){console.error("Login error:",n),o(((d=(l=n.response)==null?void 0:l.data)==null?void 0:d.message)||"Login failed")}finally{i(!1)}});return e.jsxs(e.Fragment,{children:[e.jsxs(L,{variant:"h4",gutterBottom:!0,children:["Sign in to ",x.appName]}),e.jsx(h,{severity:"info",sx:{mb:3},children:"Use your registered email and password to sign in."}),r&&e.jsx(h,{severity:"error",sx:{mb:3},children:r}),e.jsxs(E,{methods:c,onSubmit:b,children:[e.jsxs(A,{spacing:3,children:[e.jsx(f,{name:"email",label:"Email address"}),e.jsx(f,{name:"password",label:"Password",type:"password"})]}),e.jsx(v,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:w,sx:{mt:3},children:"Sign in"})]})]})}const T={title:`Sign in | Jwt - ${x.appName}`};function O(){return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:T.title}),e.jsx(M,{})]})}export{O as default};
