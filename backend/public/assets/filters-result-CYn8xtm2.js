import{r as w,j as e,a0 as F,B as v,T as m,a3 as A,I as T,d as E,k as _,Q as t,s as d,e as B,U as C}from"./index-B2Cbre3s.js";import{u as N,a as $,o as k,d as z,F as q,b as G,s as I}from"./zod-B-PeTbPC.js";import{a as D}from"./form-provider-B-IQRdhN.js";import{D as K,a as Y}from"./DialogTitle-B15UQjHU.js";import{G as b}from"./Grid-BRF5KrpT.js";import{D as L}from"./DialogActions-DGZA522y.js";const H=k({WEEKDAY:I().min(1,{message:"Weekday is required!"}),START_TIME:I().min(1,{message:"Start time is required!"}),END_TIME:I().min(1,{message:"End time is required!"})}).refine(a=>{const i=new Date(`2000-01-01T${a.START_TIME}`);return new Date(`2000-01-01T${a.END_TIME}`)>i},{message:"End time must be after start time",path:["END_TIME"]}),O=k({schedule:G(H).min(1,{message:"At least one schedule entry is required!"})}).refine(a=>{const i=a.schedule.map(r=>r.WEEKDAY),s=[...new Set(i)];return i.length===s.length},{message:"Each day of the week can only appear once in the schedule",path:["schedule"]});function te({open:a,onClose:i,onSave:s,initialSchedule:r=[]}){const[n,h]=w.useState(!1),y={schedule:r.length>0?r:[{WEEKDAY:"Monday",START_TIME:"09:00",END_TIME:"10:00"}]},g=N({mode:"onSubmit",resolver:$(O),defaultValues:y}),{reset:u,handleSubmit:f,control:j,formState:{errors:x}}=g,{fields:o,append:p,remove:R}=z({control:j,name:"schedule"}),W=f(async c=>{h(!0);try{await s(c.schedule),i(),u()}catch(l){console.error("Error saving schedule:",l)}finally{h(!1)}}),M=c=>{c.preventDefault(),c.stopPropagation(),W()},S=()=>{u(),i()};return e.jsxs(F,{fullWidth:!0,maxWidth:"md",open:a,onClose:S,PaperProps:{sx:{borderRadius:2}},children:[e.jsx(K,{sx:{pb:2},children:e.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(m,{variant:"h6",children:"Course Schedule"}),e.jsx(A,{onClick:S,children:e.jsx(T,{icon:"eva:close-fill"})})]})}),e.jsx(q,{...g,children:e.jsxs("form",{onSubmit:M,children:[e.jsxs(Y,{sx:{pb:2},children:[e.jsx(m,{variant:"body2",sx:{color:"text.secondary",mb:3},children:"Set the schedule for each day independently. Each day can have different start and end times."}),e.jsx(v,{sx:{mb:2,display:"flex",justifyContent:"flex-end"},children:e.jsx(E,{variant:"outlined",startIcon:e.jsx(T,{icon:"eva:plus-fill"}),onClick:()=>p({WEEKDAY:"Monday",START_TIME:"09:00",END_TIME:"10:00"}),children:"Add Schedule"})}),o.map((c,l)=>e.jsx(_,{sx:{p:2,mb:2},children:e.jsxs(b,{container:!0,spacing:2,children:[e.jsx(b,{size:{xs:12,sm:4},children:e.jsxs(D.Select,{name:`schedule.${l}.WEEKDAY`,label:"Day of Week",children:[e.jsx(t,{value:"Monday",children:"Monday"}),e.jsx(t,{value:"Tuesday",children:"Tuesday"}),e.jsx(t,{value:"Wednesday",children:"Wednesday"}),e.jsx(t,{value:"Thursday",children:"Thursday"}),e.jsx(t,{value:"Friday",children:"Friday"}),e.jsx(t,{value:"Saturday",children:"Saturday"}),e.jsx(t,{value:"Sunday",children:"Sunday"})]})}),e.jsx(b,{size:{xs:12,sm:4},children:e.jsx(D.Text,{name:`schedule.${l}.START_TIME`,label:"Start Time",type:"time",InputLabelProps:{shrink:!0}})}),e.jsx(b,{size:{xs:12,sm:4},children:e.jsxs(v,{sx:{display:"flex",alignItems:"flex-end",height:"100%"},children:[e.jsx(D.Text,{name:`schedule.${l}.END_TIME`,label:"End Time",type:"time",InputLabelProps:{shrink:!0},sx:{flex:1}}),o.length>1&&e.jsx(A,{color:"error",onClick:()=>R(l),sx:{ml:1,mb:.5},children:e.jsx(T,{icon:"eva:trash-2-fill"})})]})})]})},c.id)),x.schedule&&e.jsx(m,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:x.schedule.message})]}),e.jsxs(L,{sx:{px:3,pb:3},children:[e.jsx(E,{variant:"outlined",color:"inherit",onClick:S,children:"Cancel"}),e.jsx(E,{type:"submit",variant:"contained",loading:n,children:"Save Schedule"})]})]})})]})}function de({sx:a,imgUrl:i,action:s,filled:r,slotProps:n,description:h,title:y="No data",...g}){var u,f,j,x,o,p;return e.jsxs(Q,{filled:r,sx:a,...g,children:[e.jsx(v,{component:"img",alt:"Empty content",src:i??`${B.assetsDir}/assets/icons/empty/ic-content.svg`,...n==null?void 0:n.img,sx:[{width:1,maxWidth:160},...Array.isArray((u=n==null?void 0:n.img)==null?void 0:u.sx)?n.img.sx:[(f=n==null?void 0:n.img)==null?void 0:f.sx]]}),y&&e.jsx(m,{variant:"h6",...n==null?void 0:n.title,sx:[{mt:1,textAlign:"center",color:"text.disabled"},...Array.isArray((j=n==null?void 0:n.title)==null?void 0:j.sx)?n.title.sx:[(x=n==null?void 0:n.title)==null?void 0:x.sx]],children:y}),h&&e.jsx(m,{variant:"body2",...n==null?void 0:n.description,sx:[{mt:1,textAlign:"center",color:"text.disabled"},...Array.isArray((o=n==null?void 0:n.description)==null?void 0:o.sx)?n.description.sx:[(p=n==null?void 0:n.description)==null?void 0:p.sx]],children:h}),s&&s]})}const Q=d("div",{shouldForwardProp:a=>!["filled","sx"].includes(a)})(({filled:a,theme:i})=>({flexGrow:1,height:"100%",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",padding:i.spacing(0,3),...a&&{borderRadius:Number(i.shape.borderRadius)*2,backgroundColor:C(i.vars.palette.grey["500Channel"],.04),border:`dashed 1px ${C(i.vars.palette.grey["500Channel"],.08)}`}}));function ce({label:a,children:i,isShow:s,sx:r,...n}){return s?e.jsxs(U,{sx:r,...n,children:[e.jsx(V,{children:a}),e.jsx(J,{children:i})]}):null}const U=d("div")(({theme:a})=>({display:"flex",overflow:"hidden",gap:a.spacing(1),padding:a.spacing(1),borderRadius:a.shape.borderRadius,border:`dashed 1px ${a.vars.palette.divider}`})),V=d("span")(({theme:a})=>({height:24,lineHeight:"24px",fontSize:a.typography.subtitle2.fontSize,fontWeight:a.typography.subtitle2.fontWeight})),J=d("div")(({theme:a})=>({display:"flex",flexWrap:"wrap",gap:a.spacing(1)})),le={size:"small",variant:"soft"};function he({sx:a,onReset:i,children:s,totalResults:r,...n}){return e.jsxs(X,{sx:a,...n,children:[e.jsxs(Z,{children:[e.jsx("strong",{children:r}),e.jsx("span",{children:" results found"})]}),e.jsxs(P,{children:[s,e.jsx(E,{color:"error",onClick:i,startIcon:e.jsx(T,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}const X=d("div")``,Z=d("div")(({theme:a})=>({...a.typography.body2,marginBottom:a.spacing(1.5),"& span":{color:a.vars.palette.text.secondary}})),P=d("div")(({theme:a})=>({flexGrow:1,display:"flex",flexWrap:"wrap",alignItems:"center",gap:a.spacing(1)}));export{de as E,he as F,te as S,ce as a,le as c};
