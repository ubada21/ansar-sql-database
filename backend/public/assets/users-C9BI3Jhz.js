import{j as e,K as te,A as ae,B as w,Y as b,a5 as le,d as B,a6 as oe,a3 as K,n as Se,b as Te,R as ee,a7 as H,a8 as ne,N as G,I as T,a9 as ie,aa as ce,r as m,G as L,T as S,V as de,W as me,X as ue,D as se,O as Ee,Q as De,ab as _,ac as Re,w as X,p as Y,k as z,x as Pe,U as Ae,y as Ie,ad as Ue,e as Ne}from"./index-C-qVRBSV.js";import{A as Fe,F as ke,a as Z,c as J}from"./filters-result-CXKAO7q9.js";import{u as xe,a as he,o as pe,s as u,C as re,b as Le,c as Be}from"./zod-C7tQxOxR.js";import{t as A}from"./index-CEYZzIqm.js";import{F as ge,a as p}from"./form-provider-BjVfvvTB.js";import{D as je,a as fe}from"./DialogTitle-Bic72ivd.js";import{D as be}from"./DialogActions-BcG4jjqF.js";import{T as Ce}from"./TextField-_5Ol588q.js";import{C as ve,a as ye,u as Me,g as Oe,r as $e,T as qe,b as ze,c as We,e as Ge,d as Ve,f as Qe}from"./table-pagination-custom-BTXrA66C.js";import{C as He}from"./custom-breadcrumbs-B3R0xW3I.js";import{T as Ke,a as k,b as _e,c as Xe}from"./TableHead-D9WzJI8t.js";import{S as Ye}from"./Stack-BWd6IFBr.js";import{G as W}from"./Grid-CSFr3tlt.js";import"./TableSortLabel-DktZE9EQ.js";const Ze=pe({name:u().min(1,{message:"Name is required!"}),email:u().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),phoneNumber:u().optional(),country:u().optional(),state:u().optional(),city:u().optional(),address:u().optional(),zipCode:u().optional(),company:u().optional(),role:u().optional(),status:u().optional()});function Je({currentUser:s,open:i,onClose:c}){const l={name:"",email:"",phoneNumber:"",address:"",country:"",state:"",city:"",zipCode:"",status:"",company:"",role:""},n=xe({mode:"all",resolver:he(Ze),defaultValues:l,values:s}),{reset:o,handleSubmit:d,formState:{isSubmitting:v}}=n,a=d(async t=>{const x=new Promise(g=>setTimeout(g,1e3));try{o(),c(),A.promise(x,{loading:"Loading...",success:"Update success!",error:"Update error!"}),await x,console.info("DATA",t)}catch(g){console.error(g)}});return e.jsx(te,{fullWidth:!0,maxWidth:!1,open:i,onClose:c,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{maxWidth:720}},children:e.jsxs(ge,{methods:n,onSubmit:a,children:[e.jsx(je,{children:"Quick Update"}),e.jsxs(fe,{dividers:!0,sx:{pt:3},children:[e.jsx(ae,{severity:"info",sx:{mb:3},children:"Update the information below and we will update you when changes are made."}),e.jsxs(w,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(p.Text,{name:"name",label:"Full Name"}),e.jsx(p.Text,{name:"email",label:"Email Address"}),e.jsx(p.Text,{name:"phoneNumber",label:"Phone Number"}),e.jsx(p.Text,{name:"address",label:"Address"}),e.jsx(p.Text,{name:"country",label:"Country"}),e.jsx(p.Text,{name:"state",label:"State/Region"}),e.jsx(p.Text,{name:"city",label:"City"}),e.jsx(p.Text,{name:"zipCode",label:"Zip/Code"}),e.jsx(p.Text,{name:"company",label:"Company"}),e.jsxs(p.Select,{name:"role",label:"Role",children:[e.jsx(b,{value:"leader",children:" Leader "}),e.jsx(b,{value:"hr",children:" HR "}),e.jsx(b,{value:"ui designer",children:" UI Designer "}),e.jsx(b,{value:"ux designer",children:" UX Designer "}),e.jsx(b,{value:"ui/ux designer",children:" UI/UX Designer "}),e.jsx(b,{value:"project manager",children:" Project Manager "}),e.jsx(b,{value:"backend developer",children:" Backend Developer "}),e.jsx(b,{value:"full stack designer",children:" Full Stack Designer "}),e.jsx(b,{value:"front end developer",children:" Front End Developer "}),e.jsx(b,{value:"full stack developer",children:" Full Stack Developer "})]}),e.jsx(p.Select,{name:"status",label:"Status",children:le.map(t=>e.jsx(b,{value:t.value,children:t.label},t.value))})]})]}),e.jsxs(be,{children:[e.jsx(B,{variant:"outlined",color:"inherit",onClick:c,children:"Cancel"}),e.jsx(B,{type:"submit",variant:"contained",disabled:v,children:"Update"})]})]})})}function es({row:s,userRoles:i,selected:c,editHref:l,onSelectRow:n,onDeleteRow:o}){const d=oe(),v=K(),a=K(),t=()=>e.jsx(Je,{currentUser:s,open:a.value,onClose:a.onFalse}),x=()=>e.jsx(ie,{open:d.open,anchorEl:d.anchorEl,onClose:d.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(ce,{children:[e.jsx("li",{children:e.jsxs(b,{component:ee,href:l,onClick:()=>d.onClose(),children:[e.jsx(T,{icon:"solar:pen-bold"}),"Edit"]})}),e.jsxs(b,{onClick:()=>{v.onTrue(),d.onClose()},sx:{color:"error.main"},children:[e.jsx(T,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),g=()=>e.jsx(ye,{open:v.value,onClose:v.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(B,{variant:"contained",color:"error",onClick:o,children:"Delete"})});return e.jsxs(e.Fragment,{children:[e.jsxs(Ke,{hover:!0,selected:c,"aria-checked":c,tabIndex:-1,children:[e.jsx(k,{padding:"checkbox",children:e.jsx(ve,{checked:c,onClick:n,slotProps:{input:{id:`${s.UID}-checkbox`,"aria-label":`${s.UID} checkbox`}}})}),e.jsx(k,{children:e.jsxs(w,{sx:{gap:2,display:"flex",alignItems:"center"},children:[e.jsx(Se,{alt:`${s.FIRSTNAME} ${s.LASTNAME}`}),e.jsxs(Ye,{sx:{typography:"body2",flex:"1 1 auto",alignItems:"flex-start"},children:[e.jsxs(Te,{component:ee,href:l,color:"inherit",sx:{cursor:"pointer"},children:[s.FIRSTNAME," ",s.LASTNAME]}),e.jsxs(w,{component:"span",sx:{color:"text.disabled"},children:["ID: ",s.UID]})]})]})}),e.jsx(k,{sx:{whiteSpace:"nowrap"},children:s.EMAIL}),e.jsx(k,{sx:{whiteSpace:"nowrap"},children:s.PHONENUMBER||"N/A"}),e.jsx(k,{sx:{whiteSpace:"nowrap"},children:i.length>0?e.jsx(w,{sx:{display:"flex",flexDirection:"column",gap:.5},children:i.map(R=>e.jsx(H,{variant:"soft",color:R.ROLENAME==="admin"?"primary":"default",sx:{fontSize:"0.75rem"},children:R.ROLENAME},R.ROLEID))}):e.jsx(H,{variant:"soft",color:"default",sx:{fontSize:"0.75rem"},children:"No roles"})}),e.jsx(k,{children:e.jsx(H,{variant:"soft",color:"success",children:"Active"})}),e.jsx(k,{children:e.jsxs(w,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ne,{title:"Quick edit",placement:"top",arrow:!0,children:e.jsx(G,{color:a.value?"inherit":"default",onClick:a.onTrue,children:e.jsx(T,{icon:"solar:pen-bold"})})}),e.jsx(G,{color:d.open?"inherit":"default",onClick:d.onOpen,children:e.jsx(T,{icon:"eva:more-vertical-fill"})})]})})]}),t(),x(),g()]})}const ss=["AB","BC","MB","NB","NL","NS","NT","NU","ON","PE","QC","SK","YT"],rs=pe({firstName:u().min(1,{message:"First name is required!"}),lastName:u().min(1,{message:"Last name is required!"}),email:u().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),phoneNumber:u().min(1,{message:"Phone number is required!"}),address:u().min(1,{message:"Address is required!"}),city:u().min(1,{message:"City is required!"}),province:u().min(1,{message:"Province is required!"}),postalCode:u().min(1,{message:"Postal code is required!"}),password:u().min(8,{message:"Password must be at least 8 characters!"}),confirmPassword:u().min(1,{message:"Please confirm your password!"}),roles:Le(Be()).min(1,{message:"At least one role is required!"})}).refine(s=>s.password===s.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function ts({open:s,onClose:i,onSuccess:c}){const[l,n]=m.useState([]),[o,d]=m.useState(!1),v={firstName:"",lastName:"",email:"",phoneNumber:"",address:"",city:"",province:"",postalCode:"",password:"",confirmPassword:"",roles:[]},a=xe({mode:"onChange",resolver:he(rs),defaultValues:v}),{reset:t,handleSubmit:x,control:g,formState:{isSubmitting:R}}=a;m.useEffect(()=>{s&&(async()=>{try{const j=await L.get(Ee.roles.list);j.status===200&&n(j.data.roles||[])}catch(j){console.error("Error fetching roles:",j),A.error("Failed to load roles")}})()},[s]);const I=x(async h=>{var j,y,f,$,q;try{d(!0);const E={FIRSTNAME:h.firstName,LASTNAME:h.lastName,EMAIL:h.email,PASSWORD:h.password,PHONENUMBER:h.phoneNumber,ADDRESS:h.address,CITY:h.city,PROVINCE:h.province,POSTALCODE:h.postalCode},P=h.roles.map(U=>U.ROLEID);console.log("Creating user with data:",E),console.log("Selected roles:",P),console.log("API endpoint: /register");const V=await L.post("/register",E);console.log("User creation response:",V);const M=V.data.UID;if(console.log("New user ID:",M),P.length>0){console.log("Assigning roles to user:",M);for(const U of P)try{const r=await L.post(`/users/${M}/roles/`,{UID:M,ROLEID:U});console.log(`Role ${U} assigned successfully:`,r.data)}catch(r){console.error(`Error assigning role ${U}:`,r),console.error("Role error response:",(j=r.response)==null?void 0:j.data)}}A.success("User created successfully!"),t(),i(),c&&c()}catch(E){console.error("Error creating user:",E),console.error("Error response:",E.response),console.error("Error response data:",(y=E.response)==null?void 0:y.data),console.error("Error status:",(f=E.response)==null?void 0:f.status),console.error("Error message:",E.message);const P=((q=($=E.response)==null?void 0:$.data)==null?void 0:q.message)||"Failed to create user!";A.error(P)}finally{d(!1)}}),D=()=>{t(),i()};return e.jsx(te,{fullWidth:!0,maxWidth:"md",open:s,onClose:D,PaperProps:{sx:{borderRadius:2}},children:e.jsxs(ge,{methods:a,onSubmit:I,children:[e.jsx(je,{sx:{pb:2},children:e.jsxs(w,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(S,{variant:"h6",children:"Create New User"}),e.jsx(G,{onClick:D,children:e.jsx(T,{icon:"eva:close-fill"})})]})}),e.jsxs(fe,{dividers:!0,sx:{pt:2},children:[e.jsx(ae,{severity:"info",sx:{mb:3},children:"Fill in the user information below. All required fields must be completed."}),e.jsxs(w,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[e.jsx(p.Text,{name:"firstName",label:"First Name"}),e.jsx(p.Text,{name:"lastName",label:"Last Name"}),e.jsx(p.Text,{name:"email",label:"Email Address",type:"email"}),e.jsx(p.Text,{name:"phoneNumber",label:"Phone Number"}),e.jsx(p.Text,{name:"address",label:"Address",sx:{gridColumn:{xs:"span 1",sm:"span 2"}}}),e.jsx(p.Text,{name:"city",label:"City"}),e.jsxs(de,{fullWidth:!0,children:[e.jsx(me,{children:"Province"}),e.jsx(re,{name:"province",control:g,render:({field:h,fieldState:{error:j}})=>e.jsx(ue,{...h,label:"Province",error:!!j,children:ss.map(y=>e.jsx(b,{value:y,children:y},y))})})]}),e.jsx(p.Text,{name:"postalCode",label:"Postal Code"}),e.jsx(se,{sx:{gridColumn:{xs:"span 1",sm:"span 2"}}}),e.jsx(p.Text,{name:"password",label:"Password",type:"password",sx:{gridColumn:{xs:"span 1",sm:"span 2"}}}),e.jsx(p.Text,{name:"confirmPassword",label:"Confirm Password",type:"password",sx:{gridColumn:{xs:"span 1",sm:"span 2"}}}),e.jsx(se,{sx:{gridColumn:{xs:"span 1",sm:"span 2"}}}),e.jsxs(w,{sx:{gridColumn:{xs:"span 1",sm:"span 2"}},children:[e.jsx(S,{variant:"subtitle2",sx:{mb:2},children:"Roles"}),e.jsx(re,{name:"roles",control:g,render:({field:h,fieldState:{error:j}})=>e.jsx(Fe,{...h,multiple:!0,options:l,getOptionLabel:y=>y.ROLENAME,isOptionEqualToValue:(y,f)=>y.ROLEID===f.ROLEID,value:h.value||[],onChange:(y,f)=>{h.onChange(f)},renderInput:y=>e.jsx(Ce,{...y,label:"Select Roles",placeholder:"Choose roles...",error:!!j,helperText:j==null?void 0:j.message}),slotProps:{chip:{size:"small",variant:"soft"}}})})]})]})]}),e.jsxs(be,{sx:{p:3},children:[e.jsx(B,{variant:"outlined",color:"inherit",onClick:D,children:"Cancel"}),e.jsx(B,{type:"submit",variant:"contained",disabled:R||o,startIcon:o?e.jsx(T,{icon:"eva:loader-outline"}):null,children:o?"Creating...":"Create User"})]})]})})}function as({filters:s,options:i,onResetPage:c}){const l=oe(),{state:n,setState:o}=s,d=m.useCallback(t=>{c(),o({name:t.target.value})},[c,o]),v=m.useCallback(t=>{const x=typeof t.target.value=="string"?t.target.value.split(","):t.target.value;c(),o({role:x})},[c,o]),a=()=>e.jsx(ie,{open:l.open,anchorEl:l.anchorEl,onClose:l.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(ce,{children:[e.jsxs(b,{onClick:()=>l.onClose(),children:[e.jsx(T,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(b,{onClick:()=>l.onClose(),children:[e.jsx(T,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(b,{onClick:()=>l.onClose(),children:[e.jsx(T,{icon:"solar:export-bold"}),"Export"]})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(w,{sx:{p:2.5,gap:2,display:"flex",pr:{xs:2.5,md:1},flexDirection:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"}},children:[e.jsxs(de,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(me,{htmlFor:"filter-role-select",children:"Role"}),e.jsx(ue,{multiple:!0,label:"Role",value:n.role,onChange:v,renderValue:t=>t.map(x=>x).join(", "),inputProps:{id:"filter-role-select"},MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:i.roles.map(t=>e.jsxs(b,{value:t,children:[e.jsx(ve,{disableRipple:!0,size:"small",checked:n.role.includes(t),slotProps:{input:{id:`${t}-checkbox`}}}),t]},t))})]}),e.jsxs(w,{sx:{gap:2,width:1,flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(Ce,{fullWidth:!0,value:n.name,onChange:d,placeholder:"Search...",slotProps:{input:{startAdornment:e.jsx(De,{position:"start",children:e.jsx(T,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}}),e.jsx(G,{onClick:l.onOpen,children:e.jsx(T,{icon:"eva:more-vertical-fill"})})]})]}),a()]})}function ls({filters:s,onResetPage:i,totalResults:c,sx:l}){const{state:n,setState:o,resetState:d}=s,v=m.useCallback(()=>{i(),o({name:""})},[i,o]),a=m.useCallback(()=>{i(),o({status:"all"})},[i,o]),t=m.useCallback(g=>{const R=n.role.filter(I=>I!==g);i(),o({role:R})},[i,o,n.role]),x=m.useCallback(()=>{i(),d()},[i,d]);return e.jsxs(ke,{totalResults:c,onReset:x,sx:l,children:[e.jsx(Z,{label:"Status:",isShow:n.status!=="all",children:e.jsx(_,{...J,label:n.status,onDelete:a,sx:{textTransform:"capitalize"}})}),e.jsx(Z,{label:"Role:",isShow:!!n.role.length,children:n.role.map(g=>m.createElement(_,{...J,key:g,label:g,onDelete:()=>t(g)}))}),e.jsx(Z,{label:"Keyword:",isShow:!!n.name,children:e.jsx(_,{...J,label:n.name,onDelete:v})})]})}const os=[{value:"all",label:"All"},...le],ns=[{id:"name",label:"Name"},{id:"email",label:"Email",width:220},{id:"phoneNumber",label:"Phone number",width:180},{id:"roles",label:"Roles",width:200},{id:"status",label:"Status",width:100},{id:"",width:88}];function is(){const s=Me(),i=K(),c=K(),[l,n]=m.useState([]),[o,d]=m.useState({}),[v,a]=m.useState(!0),[t,x]=m.useState(""),[g,R]=m.useState([]),I=Re({name:"",role:[],status:"all"}),{state:D,setState:h}=I,j=m.useCallback(async()=>{try{a(!0);const r=await L.get("/users"),C=r.data;if(r.status===200){const O=C.users||[];n(O);const N={};for(const F of O)try{const Q=await L.get(`/users/${F.UID}/roles`);if(Q.status===200){const we=Q.data;N[F.UID]=we.roles||[]}else N[F.UID]=[]}catch(Q){console.error(`Error fetching roles for user ${F.UID}:`,Q),N[F.UID]=[]}d(N)}else x(C.message||"Failed to fetch users")}catch(r){console.error("Error fetching users:",r),x("Failed to fetch users")}finally{a(!1)}},[]),y=m.useCallback(async()=>{try{const r=await L.get("/roles");if(r.status===200){const C=r.data;R(C.roles||[])}}catch(r){console.error("Error fetching roles:",r)}},[]);m.useEffect(()=>{j(),y()},[j,y]);const f=cs({inputData:l,comparator:Oe(s.order,s.orderBy),filters:D,userRoles:o}),$=$e(f,s.page,s.rowsPerPage),q=!!D.name||D.role.length>0||D.status!=="all",E=!f.length&&q||!f.length,P=m.useCallback(async r=>{try{const C=await L.delete(`/users/${r}`);if(C.status===200){const O=l.filter(F=>F.UID!==r);n(O);const N={...o};delete N[r],d(N),A.success("Delete success!"),s.onUpdatePageDeleteRow($.length)}else{const O=C.data;A.error(O.message||"Failed to delete user")}}catch(C){console.error("Error deleting user:",C),A.error("Failed to delete user")}},[$.length,s,l,o]),V=m.useCallback(async()=>{try{for(const r of s.selected)await P(r);A.success(`${s.selected.length} users deleted successfully!`)}catch(r){console.error("Error deleting selected users:",r),A.error("Failed to delete some users")}},[s.selected,P]),M=m.useCallback((r,C)=>{s.onResetPage(),h({status:C})},[h,s]),U=()=>e.jsx(ye,{open:i.value,onClose:i.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",s.selected.length," "]})," items?"]}),action:e.jsx(B,{variant:"contained",color:"error",onClick:()=>{V(),i.onFalse()},children:"Delete"})});return v?e.jsx(X,{children:e.jsx(w,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:e.jsx(w,{children:"Loading users..."})})}):t?e.jsx(X,{children:e.jsx(w,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:e.jsx(w,{sx:{color:"error.main"},children:t})})}):e.jsxs(e.Fragment,{children:[e.jsxs(X,{children:[e.jsx(He,{heading:"Users List",links:[{name:"Dashboard",href:Y.dashboard.root},{name:"Users",href:Y.dashboard.users},{name:"List"}],action:e.jsx(B,{variant:"contained",startIcon:e.jsx(T,{icon:"mingcute:add-line"}),onClick:c.onTrue,children:"Add user"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(W,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(W,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(z,{sx:{p:3,textAlign:"center"},children:[e.jsx(S,{variant:"h4",color:"primary.main",gutterBottom:!0,children:l.length}),e.jsx(S,{variant:"h6",gutterBottom:!0,children:"Total Users"}),e.jsx(S,{variant:"body2",color:"text.secondary",children:"All registered users"})]})}),e.jsx(W,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(z,{sx:{p:3,textAlign:"center"},children:[e.jsx(S,{variant:"h4",color:"success.main",gutterBottom:!0,children:l.filter(r=>r.status==="active").length}),e.jsx(S,{variant:"h6",gutterBottom:!0,children:"Active Users"}),e.jsx(S,{variant:"body2",color:"text.secondary",children:"Currently active"})]})}),e.jsx(W,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(z,{sx:{p:3,textAlign:"center"},children:[e.jsx(S,{variant:"h4",color:"warning.main",gutterBottom:!0,children:l.filter(r=>r.status==="pending").length}),e.jsx(S,{variant:"h6",gutterBottom:!0,children:"Pending Users"}),e.jsx(S,{variant:"body2",color:"text.secondary",children:"Awaiting approval"})]})}),e.jsx(W,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(z,{sx:{p:3,textAlign:"center"},children:[e.jsx(S,{variant:"h4",color:"error.main",gutterBottom:!0,children:l.filter(r=>r.status==="banned").length}),e.jsx(S,{variant:"h6",gutterBottom:!0,children:"Banned Users"}),e.jsx(S,{variant:"body2",color:"text.secondary",children:"Suspended accounts"})]})})]}),e.jsxs(z,{children:[e.jsx(Pe,{value:D.status,onChange:M,sx:[r=>({px:{md:2.5},boxShadow:`inset 0 -2px 0 0 ${Ae(r.vars.palette.grey["500Channel"],.08)}`})],children:os.map(r=>e.jsx(Ie,{iconPosition:"end",value:r.value,label:r.label,icon:e.jsx(H,{variant:(r.value==="all"||r.value===D.status)&&"filled"||"soft",color:r.value==="active"&&"success"||r.value==="pending"&&"warning"||r.value==="banned"&&"error"||"default",children:r.value==="all"?l.length:l.filter(C=>C.status===r.value).length})},r.value))}),e.jsx(as,{filters:I,onResetPage:s.onResetPage,options:{roles:g.map(r=>r.ROLENAME)}}),q&&e.jsx(ls,{filters:I,totalResults:f.length,onResetPage:s.onResetPage,sx:{p:2.5,pt:0}}),e.jsxs(w,{sx:{position:"relative"},children:[e.jsx(qe,{dense:s.dense,numSelected:s.selected.length,rowCount:f.length,onSelectAllRows:r=>s.onSelectAllRows(r,f.map(C=>C.UID)),action:e.jsx(ne,{title:"Delete",children:e.jsx(G,{color:"primary",onClick:i.onTrue,children:e.jsx(T,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(Ue,{children:e.jsxs(_e,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(ze,{order:s.order,orderBy:s.orderBy,headCells:ns,rowCount:f.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:r=>s.onSelectAllRows(r,f.map(C=>C.UID))}),e.jsxs(Xe,{children:[f.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(r=>e.jsx(es,{row:r,userRoles:o[r.UID]||[],selected:s.selected.includes(r.UID),onSelectRow:()=>s.onSelectRow(r.UID),onDeleteRow:()=>P(r.UID),editHref:Y.dashboard.users},r.UID)),e.jsx(We,{height:s.dense?56:76,emptyRows:Ge(s.page,s.rowsPerPage,f.length)}),e.jsx(Ve,{notFound:E})]})]})})]}),e.jsx(Qe,{page:s.page,dense:s.dense,count:f.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onChangeDense:s.onChangeDense,onRowsPerPageChange:s.onChangeRowsPerPage})]})]}),U(),e.jsx(ts,{open:c.value,onClose:c.onFalse,onSuccess:j})]})}function cs({inputData:s,comparator:i,filters:c,userRoles:l}){const{name:n,status:o,role:d}=c,v=s.map((a,t)=>[a,t]);return v.sort((a,t)=>{const x=i(a[0],t[0]);return x!==0?x:a[1]-t[1]}),s=v.map(a=>a[0]),n&&(s=s.filter(a=>`${a.FIRSTNAME} ${a.LASTNAME}`.toLowerCase().includes(n.toLowerCase())||a.EMAIL.toLowerCase().includes(n.toLowerCase()))),o!=="all"&&(s=s.filter(a=>a.status===o)),d.length&&(s=s.filter(a=>{const t=l[a.UID]||[];return d.some(x=>t.some(g=>g.ROLENAME===x))})),s}const ds={title:`Users | Dashboard - ${Ne.appName}`};function Ts(){return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:ds.title}),e.jsx(is,{})]})}export{Ts as default};
