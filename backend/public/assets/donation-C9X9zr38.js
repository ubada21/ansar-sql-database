import{z as G,E as K,r as m,j as e,e as Q,w as P,B as _,k as j,T as s,A as E,d as u,I as k,p as b,D as f,J as H,K as B,N as w,O as R,Q as L,V as J,G as X,W as Z}from"./index-B2Cbre3s.js";import{u as ee,a as te,o as re,s as l,n as oe}from"./zod-B-PeTbPC.js";import{C as ae}from"./custom-breadcrumbs-CnqUOG1T.js";import{S as d}from"./Stack-B6VeFILc.js";import{T as c}from"./TextField-s5sflpap.js";const Y={title:`Donate | ${Q.appName}`},se=re({email:l().email("Please enter a valid email address"),firstName:l().min(1,"First name is required"),lastName:l().min(1,"Last name is required"),amount:oe().min(1,"Amount must be at least $1"),method:l().min(1,"Please select a payment method"),address:l().optional(),city:l().optional(),province:l().optional(),postalCode:l().optional(),notes:l().optional()}),ne=["AB","BC","MB","NB","NL","NS","NT","NU","ON","PE","QC","SK","YT"],ie=["Credit Card","Debit Card","Bank Transfer","PayPal","Cash","Check"];function pe(){var I,N,A,T,S,M,D,O;const p=G(),{authenticated:r,user:t}=K(),[h,x]=m.useState(!1),[W,g]=m.useState(!1),[v,C]=m.useState(""),{register:i,handleSubmit:F,setValue:n,watch:V,formState:{errors:o,isSubmitting:$}}=ee({resolver:te(se),defaultValues:{email:"",firstName:"",lastName:"",amount:"",method:"",address:"",city:"",province:"",postalCode:"",notes:""}}),q=V("province");m.useEffect(()=>{r&&t&&(n("email",t.EMAIL||""),n("firstName",t.FIRSTNAME||""),n("lastName",t.LASTNAME||""),n("address",t.ADDRESS||""),n("city",t.CITY||""),n("province",t.PROVINCE||""),n("postalCode",t.POSTALCODE||""))},[r,t,n]);const U=async a=>{x(!0),C("");try{const y=`RCP-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,z={EMAIL:a.email||(t==null?void 0:t.EMAIL),FIRSTNAME:a.firstName||(t==null?void 0:t.FIRSTNAME),LASTNAME:a.lastName||(t==null?void 0:t.LASTNAME),AMOUNT:a.amount,METHOD:a.method,ADDRESS:a.address||(t==null?void 0:t.ADDRESS)||null,CITY:a.city||(t==null?void 0:t.CITY)||null,PROVINCE:a.province||(t==null?void 0:t.PROVINCE)||null,POSTALCODE:a.postalCode||(t==null?void 0:t.POSTALCODE)||null,NOTES:a.notes||null,RECEIPT_NUMBER:y,DONOR_ID:r&&t?t.UID:null};await X.post(Z.transactions.create,z),g(!0),x(!1)}catch(y){console.error("Error submitting donation:",y),C("There was an error processing your donation. Please try again."),x(!1)}};return W?e.jsxs(e.Fragment,{children:[e.jsx("title",{children:Y.title}),e.jsx(P,{maxWidth:"md",children:e.jsx(_,{sx:{py:4},children:e.jsxs(j,{sx:{p:4,textAlign:"center"},children:[e.jsx(s,{variant:"h4",color:"success.main",gutterBottom:!0,children:"Thank You for Your Donation!"}),e.jsx(s,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Your generous contribution will help support our educational programs and community initiatives."}),e.jsx(E,{severity:"success",sx:{mb:3},children:"Your donation has been successfully processed. You will receive a confirmation email shortly."}),e.jsxs(d,{direction:"row",spacing:2,justifyContent:"center",children:[e.jsx(u,{variant:"contained",onClick:()=>{g(!1),n("amount",""),n("method",""),n("notes","")},children:"Make Another Donation"}),r&&e.jsx(u,{variant:"outlined",onClick:()=>p.push(b.dashboard.root),startIcon:e.jsx(k,{icon:"eva:arrow-back-fill"}),children:"Back to Dashboard"})]})]})})})]}):e.jsxs(e.Fragment,{children:[e.jsx("title",{children:Y.title}),e.jsxs(P,{maxWidth:"lg",children:[e.jsx(ae,{heading:"Support Our Mission",links:[...r?[{name:"Dashboard",href:b.dashboard.root}]:[],{name:"Donate"}],action:r&&e.jsx(u,{variant:"outlined",onClick:()=>p.push(b.dashboard.root),startIcon:e.jsx(k,{icon:"eva:arrow-back-fill"}),children:"Back to Dashboard"}),sx:{mb:{xs:3,md:5}}}),e.jsx(s,{variant:"h6",textAlign:"center",color:"text.secondary",sx:{mb:6},children:"Your donation helps us provide quality Islamic education and community services"}),e.jsxs(j,{sx:{p:4},children:[e.jsx(s,{variant:"h5",gutterBottom:!0,children:"Make a Donation"}),e.jsx(s,{variant:"body2",color:"text.secondary",sx:{mb:4},children:r?"Thank you for being a registered user. Your information has been pre-filled for your convenience.":"Please provide your information below. You can also create an account to save your details for future donations."}),v&&e.jsx(E,{severity:"error",sx:{mb:3},children:v}),e.jsx("form",{onSubmit:F(U),children:e.jsxs(d,{spacing:3,children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Personal Information"}),e.jsxs(d,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(c,{fullWidth:!0,label:"First Name",...i("firstName"),error:!!o.firstName,helperText:(I=o.firstName)==null?void 0:I.message,InputProps:{readOnly:r},sx:{"& .MuiInputBase-input.Mui-readOnly":{backgroundColor:r?"action.hover":"transparent"}}}),e.jsx(c,{fullWidth:!0,label:"Last Name",...i("lastName"),error:!!o.lastName,helperText:(N=o.lastName)==null?void 0:N.message,InputProps:{readOnly:r},sx:{"& .MuiInputBase-input.Mui-readOnly":{backgroundColor:r?"action.hover":"transparent"}}})]}),e.jsx(c,{fullWidth:!0,label:"Email Address",type:"email",...i("email"),error:!!o.email,helperText:(A=o.email)==null?void 0:A.message,InputProps:{readOnly:r},sx:{"& .MuiInputBase-input.Mui-readOnly":{backgroundColor:r?"action.hover":"transparent"}}}),e.jsx(f,{}),e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Donation Details"}),e.jsxs(d,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(c,{fullWidth:!0,label:"Amount",type:"number",InputProps:{startAdornment:e.jsx(H,{position:"start",children:"$"})},...i("amount",{valueAsNumber:!0}),error:!!o.amount,helperText:(T=o.amount)==null?void 0:T.message}),e.jsxs(B,{fullWidth:!0,error:!!o.method,children:[e.jsx(w,{children:"Payment Method"}),e.jsx(R,{label:"Payment Method",...i("method"),error:!!o.method,children:ie.map(a=>e.jsx(L,{value:a,children:a},a))})]})]}),e.jsx(c,{fullWidth:!0,label:"Notes (Optional)",multiline:!0,rows:3,placeholder:"Any additional comments or special instructions...",...i("notes"),error:!!o.notes,helperText:(S=o.notes)==null?void 0:S.message}),e.jsx(f,{}),e.jsx(s,{variant:"h6",gutterBottom:!0,children:"Address Information (Optional)"}),e.jsx(c,{fullWidth:!0,label:"Address",...i("address"),error:!!o.address,helperText:(M=o.address)==null?void 0:M.message,InputProps:{readOnly:r},sx:{"& .MuiInputBase-input.Mui-readOnly":{backgroundColor:r?"action.hover":"transparent"}}}),e.jsxs(d,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(c,{fullWidth:!0,label:"City",...i("city"),error:!!o.city,helperText:(D=o.city)==null?void 0:D.message,InputProps:{readOnly:r},sx:{"& .MuiInputBase-input.Mui-readOnly":{backgroundColor:r?"action.hover":"transparent"}}}),e.jsxs(B,{fullWidth:!0,error:!!o.province,children:[e.jsx(w,{children:"Province"}),e.jsx(R,{label:"Province",...i("province"),error:!!o.province,disabled:r,value:q||"",children:ne.map(a=>e.jsx(L,{value:a,children:a},a))})]})]}),e.jsx(c,{fullWidth:!0,label:"Postal Code",...i("postalCode"),error:!!o.postalCode,helperText:(O=o.postalCode)==null?void 0:O.message,InputProps:{readOnly:r},sx:{"& .MuiInputBase-input.Mui-readOnly":{backgroundColor:r?"action.hover":"transparent"}}}),e.jsx(f,{}),e.jsxs(d,{direction:"row",spacing:2,justifyContent:"flex-end",children:[!r&&e.jsx(u,{variant:"outlined",onClick:()=>p.push("/login"),children:"Sign In"}),e.jsx(u,{type:"submit",variant:"contained",size:"large",disabled:h||$,startIcon:h?e.jsx(J,{size:20}):null,children:h?"Processing...":"Complete Donation"})]})]})})]}),e.jsxs(j,{sx:{p:4,mt:4},children:[e.jsx(s,{variant:"h6",gutterBottom:!0,children:"About Your Donation"}),e.jsxs(d,{spacing:2,children:[e.jsx(s,{variant:"body2",color:"text.secondary",children:"• All donations are tax-deductible and you will receive a receipt for your records"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"• Your information is kept secure and will only be used for donation processing"}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"• For questions about your donation, please contact us at donations@example.com"})]})]})]})]})}export{pe as default};
