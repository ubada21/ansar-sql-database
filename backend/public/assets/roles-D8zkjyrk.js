import{y,z as b,r as o,E as R,j as e,e as E,v as x}from"./index-C4gKnlNZ.js";const p=R.API_URL,f={title:`Roles | Dashboard - ${E.appName}`};function w(){const g=y(),{authenticated:l}=b(),[s,d]=o.useState([]),[m,i]=o.useState(!0),[a,c]=o.useState(""),h=o.useCallback(async()=>{try{i(!0);const t=await fetch(p+"/roles",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),r=await t.json();t.ok?d(r.roles||[]):c(r.message||"Failed to fetch roles")}catch(t){console.error("Error fetching roles:",t),c("Failed to fetch roles")}finally{i(!1)}},[]);if(o.useEffect(()=>{l&&h()},[l,h]),!l)return g.push("/login"),null;const u=async t=>{if(confirm("Are you sure you want to delete this role?"))try{const r=await fetch(p+`/roles/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"});if(r.ok)d(s.filter(n=>n.ROLEID!==t)),alert("Role deleted successfully!");else{const n=await r.json();alert(n.message||"Failed to delete role")}}catch(r){console.error("Error deleting role:",r),alert("Failed to delete role")}},j=t=>{};return m?e.jsxs(e.Fragment,{children:[e.jsx("title",{children:f.title}),e.jsx(x,{maxWidth:"xl",children:e.jsx("div",{children:"Loading roles..."})})]}):e.jsxs(e.Fragment,{children:[e.jsx("title",{children:f.title}),e.jsxs(x,{maxWidth:"xl",children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{children:"Roles Management"}),e.jsx("p",{children:"Manage all roles in the system"})]}),a&&e.jsx("div",{style:{padding:"1rem",marginBottom:"1rem",backgroundColor:"#ffebee",color:"#c62828",borderRadius:"4px"},children:a}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h2",{style:{margin:0},children:["All Roles (",s.length,")"]}),e.jsx("button",{onClick:()=>{},style:{padding:"0.5rem 1rem",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Add Role"})]}),s.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#666"},children:"No roles found"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"1px solid #e0e0e0"},children:"Role ID"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"1px solid #e0e0e0"},children:"Role Name"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"1px solid #e0e0e0"},children:"Description"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",borderBottom:"1px solid #e0e0e0"},children:"Actions"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{style:{borderBottom:"1px solid #f0f0f0"},children:[e.jsx("td",{style:{padding:"1rem"},children:e.jsx("div",{style:{fontWeight:"bold"},children:t.ROLEID})}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#e3f2fd",color:"#1976d2",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:t.ROLENAME})}),e.jsx("td",{style:{padding:"1rem"},children:t.DESCRIPTION||"No description"}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>j(t.ROLEID),style:{padding:"0.25rem 0.5rem",backgroundColor:"#ff9800",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Edit"}),e.jsx("button",{onClick:()=>u(t.ROLEID),style:{padding:"0.25rem 0.5rem",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})})]},t.ROLEID))})]})})]})]})]})}export{w as default};
