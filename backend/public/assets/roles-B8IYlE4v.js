import{z as y,E as b,r,G as x,j as e,e as R,w as h}from"./index-DQDqTxBb.js";const p={title:`Roles | Dashboard - ${R.appName}`};function E(){const g=y(),{authenticated:l}=b(),[o,d]=r.useState([]),[u,n]=r.useState(!0),[i,a]=r.useState(""),c=r.useCallback(async()=>{try{n(!0);const t=await x.get("/roles");t.status===200?d(t.data.roles||[]):a(t.data.message||"Failed to fetch roles")}catch(t){console.error("Error fetching roles:",t),a("Failed to fetch roles")}finally{n(!1)}},[]);if(r.useEffect(()=>{l&&c()},[l,c]),!l)return g.push("/login"),null;const m=async t=>{if(confirm("Are you sure you want to delete this role?"))try{const s=await x.delete(`/roles/${t}`);s.status===200?(d(o.filter(j=>j.ROLEID!==t)),alert("Role deleted successfully!")):alert(s.data.message||"Failed to delete role")}catch(s){console.error("Error deleting role:",s),alert("Failed to delete role")}},f=t=>{};return u?e.jsxs(e.Fragment,{children:[e.jsx("title",{children:p.title}),e.jsx(h,{maxWidth:"xl",children:e.jsx("div",{children:"Loading roles..."})})]}):e.jsxs(e.Fragment,{children:[e.jsx("title",{children:p.title}),e.jsxs(h,{maxWidth:"xl",children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h1",{children:"Roles Management"}),e.jsx("p",{children:"Manage all roles in the system"})]}),i&&e.jsx("div",{style:{padding:"1rem",marginBottom:"1rem",backgroundColor:"#ffebee",color:"#c62828",borderRadius:"4px"},children:i}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h2",{style:{margin:0},children:["All Roles (",o.length,")"]}),e.jsx("button",{onClick:()=>{},style:{padding:"0.5rem 1rem",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Add Role"})]}),o.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#666"},children:"No roles found"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[e.jsx("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"1px solid #e0e0e0"},children:"Role ID"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"1px solid #e0e0e0"},children:"Role Name"}),e.jsx("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"1px solid #e0e0e0"},children:"Description"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center",borderBottom:"1px solid #e0e0e0"},children:"Actions"})]})}),e.jsx("tbody",{children:o.map(t=>e.jsxs("tr",{style:{borderBottom:"1px solid #f0f0f0"},children:[e.jsx("td",{style:{padding:"1rem"},children:e.jsx("div",{style:{fontWeight:"bold"},children:t.ROLEID})}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#e3f2fd",color:"#1976d2",borderRadius:"12px",fontSize:"12px",fontWeight:"bold"},children:t.ROLENAME})}),e.jsx("td",{style:{padding:"1rem"},children:t.DESCRIPTION||"No description"}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>f(t.ROLEID),style:{padding:"0.25rem 0.5rem",backgroundColor:"#ff9800",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Edit"}),e.jsx("button",{onClick:()=>m(t.ROLEID),style:{padding:"0.25rem 0.5rem",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})})]},t.ROLEID))})]})})]})]})]})}export{E as default};
